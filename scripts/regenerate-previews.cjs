/**
 * Regenerate auto-generated previews with realistic category-specific sample data.
 * Only overwrites files that have the old "api/description/category/auth" format.
 * Hand-crafted previews (different sampleResponse shape) are left untouched.
 */

const fs = require("fs");
const path = require("path");

const catalogPath = path.join(__dirname, "..", "data", "catalog.json");
const previewDir = path.join(__dirname, "..", "data", "previews");

const catalog = JSON.parse(fs.readFileSync(catalogPath, "utf-8"));

function slugify(name) {
  return name.toLowerCase().replace(/[^a-z0-9]+/g, "-").replace(/^-|-$/, "");
}

function isAutoGenerated(preview) {
  // Old auto-generated files have sampleResponse with these exact fields
  const s = preview.sampleResponse;
  return (
    s &&
    typeof s.api === "string" &&
    typeof s.description === "string" &&
    typeof s.category === "string" &&
    typeof s.auth !== "undefined"
  );
}

// ‚îÄ‚îÄ Category-specific sample data generators ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

function sampleForCategory(cat, name, desc) {
  switch (cat) {
    case "Weather":
      return {
        previewType: "card",
        sampleResponse: {
          location: "San Francisco, CA",
          temperature: "18¬∞C / 64¬∞F",
          condition: "Partly Cloudy",
          humidity: "72%",
          wind: "14 km/h W",
          uv_index: 4,
          forecast: "Rain expected Thursday",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["location", "temperature", "condition", "humidity", "wind"],
        },
      };

    case "Finance":
      return {
        previewType: "card",
        sampleResponse: {
          symbol: "AAPL",
          price: "$182.63",
          change: "+1.24 (0.68%)",
          volume: "54,823,100",
          market_cap: "$2.87T",
          pe_ratio: 28.4,
          week_52_high: "$198.23",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["symbol", "price", "change", "volume", "market_cap"],
        },
      };

    case "Cryptocurrency":
      return {
        previewType: "card",
        sampleResponse: {
          name: "Bitcoin",
          symbol: "BTC",
          price_usd: "$67,432.18",
          change_24h: "+3.41%",
          market_cap: "$1.33T",
          volume_24h: "$38.2B",
          circulating_supply: "19.7M BTC",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["name", "price_usd", "change_24h", "market_cap", "volume_24h"],
        },
      };

    case "Geocoding":
      return {
        previewType: "card",
        sampleResponse: {
          address: "1600 Amphitheatre Pkwy",
          city: "Mountain View",
          state: "California",
          country: "United States",
          postal_code: "94043",
          latitude: 37.4224,
          longitude: -122.0842,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["address", "city", "state", "country", "latitude", "longitude"],
        },
      };

    case "Games & Comics":
      return {
        previewType: "card",
        sampleResponse: {
          title: "The Legend of Zelda: Breath of the Wild",
          platform: "Nintendo Switch",
          genre: "Action-Adventure",
          rating: "9.4 / 10",
          released: "March 3, 2017",
          developer: "Nintendo EPD",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["title", "platform", "genre", "rating", "released"],
        },
      };

    case "Animals":
      return {
        previewType: "card",
        sampleResponse: {
          name: "Red Fox",
          scientific_name: "Vulpes vulpes",
          habitat: "Forest, Grassland, Urban",
          diet: "Omnivore",
          lifespan: "2‚Äì5 years (wild)",
          weight: "2.2‚Äì14 kg",
          conservation_status: "Least Concern",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["name", "scientific_name", "habitat", "diet", "conservation_status"],
        },
      };

    case "Food & Drink":
      return {
        previewType: "card",
        sampleResponse: {
          name: "Pasta Carbonara",
          cuisine: "Italian",
          prep_time: "10 min",
          cook_time: "20 min",
          calories: "620 kcal",
          servings: 2,
          difficulty: "Medium",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["name", "cuisine", "prep_time", "cook_time", "calories"],
        },
      };

    case "Music":
      return {
        previewType: "list",
        sampleResponse: {
          items: [
            { title: "Blinding Lights", artist: "The Weeknd", duration: "3:20" },
            { title: "Shape of You", artist: "Ed Sheeran", duration: "3:53" },
            { title: "Levitating", artist: "Dua Lipa", duration: "3:23" },
            { title: "Stay", artist: "The Kid LAROI", duration: "2:22" },
            { title: "Peaches", artist: "Justin Bieber", duration: "3:18" },
          ],
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          itemKey: "title",
          secondaryKey: "artist",
          badgeKey: "duration",
        },
      };

    case "Sports & Fitness":
      return {
        previewType: "card",
        sampleResponse: {
          match: "Lakers vs Warriors",
          score: "112 ‚Äì 108",
          status: "Final",
          venue: "Chase Center, SF",
          date: "Feb 22, 2026",
          mvp: "Stephen Curry",
          attendance: "18,064",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["match", "score", "status", "venue", "mvp"],
        },
      };

    case "Transportation":
      return {
        previewType: "card",
        sampleResponse: {
          flight: "UA 328",
          origin: "SFO ‚Äî San Francisco",
          destination: "JFK ‚Äî New York",
          departure: "08:45 AM",
          arrival: "05:17 PM",
          status: "On Time",
          aircraft: "Boeing 737-900",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["flight", "origin", "destination", "departure", "status"],
        },
      };

    case "Science & Math":
      return {
        previewType: "card",
        sampleResponse: {
          element: "Carbon",
          symbol: "C",
          atomic_number: 6,
          atomic_mass: "12.011 u",
          category: "Nonmetal",
          melting_point: "3,642 K",
          electron_config: "[He] 2s¬≤ 2p¬≤",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["element", "symbol", "atomic_number", "atomic_mass", "category"],
        },
      };

    case "Books":
      return {
        previewType: "card",
        sampleResponse: {
          title: "The Pragmatic Programmer",
          author: "David Thomas, Andrew Hunt",
          isbn: "978-0-13-595705-9",
          published: "1999",
          pages: 352,
          genre: "Software Engineering",
          rating: "4.8 / 5",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["title", "author", "published", "pages", "genre", "rating"],
        },
      };

    case "Video":
      return {
        previewType: "card",
        sampleResponse: {
          title: "Inception",
          year: 2010,
          director: "Christopher Nolan",
          rating: "8.8 / 10",
          runtime: "2h 28min",
          genre: "Sci-Fi, Thriller",
          box_office: "$836.8M",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["title", "director", "year", "rating", "runtime", "genre"],
        },
      };

    case "Anime":
      return {
        previewType: "card",
        sampleResponse: {
          title: "Attack on Titan",
          studio: "MAPPA",
          episodes: 87,
          status: "Finished",
          score: "9.0 / 10",
          genres: "Action, Drama, Fantasy",
          aired: "2013 ‚Äì 2023",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["title", "studio", "episodes", "score", "genres"],
        },
      };

    case "News":
      return {
        previewType: "list",
        sampleResponse: {
          items: [
            { title: "Global AI regulation talks resume in Geneva", source: "Reuters" },
            { title: "SpaceX Starship completes third successful orbital test", source: "AP" },
            { title: "EU announces new climate policy framework for 2030", source: "BBC" },
            { title: "Tech stocks rally on strong earnings reports", source: "Bloomberg" },
            { title: "Scientists discover new deep-sea species off Pacific coast", source: "Nature" },
          ],
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          itemKey: "title",
          secondaryKey: "source",
        },
      };

    case "Social":
      return {
        previewType: "card",
        sampleResponse: {
          username: "@janedoe",
          display_name: "Jane Doe",
          followers: "142,803",
          following: 891,
          posts: "3,241",
          verified: true,
          bio: "Developer üë©‚Äçüíª | Open source enthusiast",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["username", "followers", "following", "posts", "verified"],
        },
      };

    case "Health":
      return {
        previewType: "card",
        sampleResponse: {
          condition: "Type 2 Diabetes",
          icd_code: "E11",
          category: "Endocrine disorder",
          prevalence: "~462M worldwide",
          treatment: "Lifestyle change, medication",
          risk_factors: "Obesity, inactivity, genetics",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["condition", "icd_code", "category", "prevalence", "treatment"],
        },
      };

    case "Machine Learning":
      return {
        previewType: "card",
        sampleResponse: {
          input: "The movie was absolutely fantastic!",
          label: "POSITIVE",
          confidence: "98.7%",
          model: "distilbert-base-uncased",
          latency_ms: 42,
          tokens: 8,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["input", "label", "confidence", "model", "latency_ms"],
        },
      };

    case "Text Analysis":
      return {
        previewType: "card",
        sampleResponse: {
          text: "Elon Musk visited Tesla HQ in Austin.",
          language: "English",
          sentiment: "Neutral",
          entities: ["Elon Musk (Person)", "Tesla (Org)", "Austin (Location)"],
          word_count: 7,
          reading_level: "Grade 8",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["language", "sentiment", "entities", "word_count"],
        },
      };

    case "Currency Exchange":
      return {
        previewType: "card",
        sampleResponse: {
          base: "USD",
          EUR: 0.9241,
          GBP: 0.7892,
          JPY: 149.82,
          CAD: 1.3614,
          AUD: 1.5473,
          updated: "2026-02-25 12:00 UTC",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["base", "EUR", "GBP", "JPY", "CAD"],
        },
      };

    case "Photography":
      return {
        previewType: "card",
        sampleResponse: {
          title: "Golden Gate at Dusk",
          photographer: "Alex Morgan",
          camera: "Sony A7R V",
          aperture: "f/8",
          shutter_speed: "1/250s",
          iso: 200,
          resolution: "61 MP",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["photographer", "camera", "aperture", "shutter_speed", "iso"],
        },
      };

    case "Environment":
      return {
        previewType: "card",
        sampleResponse: {
          location: "Los Angeles, CA",
          aqi: 87,
          category: "Moderate",
          pm2_5: "18.3 ¬µg/m¬≥",
          pm10: "34.1 ¬µg/m¬≥",
          o3: "0.064 ppm",
          updated: "2026-02-25 11:00 AM",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["location", "aqi", "category", "pm2_5", "pm10"],
        },
      };

    case "Email":
      return {
        previewType: "card",
        sampleResponse: {
          email: "user@example.com",
          valid: true,
          deliverable: true,
          domain: "example.com",
          mx_found: true,
          disposable: false,
          role_account: false,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["email", "valid", "deliverable", "domain", "disposable"],
        },
      };

    case "Personality":
      return {
        previewType: "card",
        sampleResponse: {
          quote: "The only way to do great work is to love what you do.",
          author: "Steve Jobs",
          category: "Motivation",
          length: 55,
          tags: ["work", "passion", "greatness"],
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["quote", "author", "category"],
        },
      };

    case "Entertainment":
      return {
        previewType: "card",
        sampleResponse: {
          question: "What is the largest planet in our solar system?",
          answer: "Jupiter",
          category: "Science",
          difficulty: "Easy",
          options: ["Saturn", "Jupiter", "Neptune", "Uranus"],
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["question", "answer", "category", "difficulty"],
        },
      };

    case "Test Data":
      return {
        previewType: "card",
        sampleResponse: {
          name: "Alexandra Chen",
          email: "a.chen@fakemail.dev",
          phone: "+1 (415) 555-0192",
          address: "847 Oak St, Portland, OR 97201",
          username: "achen_dev",
          avatar: "https://i.pravatar.cc/100",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["name", "email", "phone", "address", "username"],
        },
      };

    case "Development":
      return {
        previewType: "card",
        sampleResponse: {
          repo: "facebook/react",
          stars: "228,441",
          forks: "46,832",
          language: "JavaScript",
          open_issues: 891,
          license: "MIT",
          last_commit: "2 hours ago",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["repo", "stars", "forks", "language", "open_issues"],
        },
      };

    case "Security":
    case "Anti-Malware":
      return {
        previewType: "card",
        sampleResponse: {
          ip: "192.168.1.1",
          threat_score: 12,
          is_malicious: false,
          country: "United States",
          isp: "Comcast",
          reports: 3,
          last_seen: "30 days ago",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["ip", "threat_score", "is_malicious", "country", "reports"],
        },
      };

    case "Government":
    case "Open Data":
      return {
        previewType: "card",
        sampleResponse: {
          dataset: "US Population by State 2024",
          total_records: 51,
          last_updated: "Jan 2025",
          source: "U.S. Census Bureau",
          format: "JSON / CSV",
          license: "Public Domain",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["dataset", "total_records", "last_updated", "source", "license"],
        },
      };

    case "Documents & Productivity":
      return {
        previewType: "card",
        sampleResponse: {
          document: "Q4 2025 Report.pdf",
          pages: 24,
          word_count: "8,420",
          language: "English",
          created: "Jan 15, 2026",
          author: "Jane Smith",
          size: "2.3 MB",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["document", "pages", "word_count", "language", "author"],
        },
      };

    case "Jobs":
      return {
        previewType: "list",
        sampleResponse: {
          items: [
            { title: "Senior Frontend Engineer", company: "Stripe", location: "Remote" },
            { title: "ML Engineer", company: "Anthropic", location: "San Francisco" },
            { title: "Product Designer", company: "Figma", location: "New York" },
            { title: "Backend Engineer", company: "Shopify", location: "Remote" },
          ],
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          itemKey: "title",
          secondaryKey: "company",
          badgeKey: "location",
        },
      };

    case "Shopping":
      return {
        previewType: "card",
        sampleResponse: {
          product: "Sony WH-1000XM5 Headphones",
          price: "$349.99",
          rating: "4.7 / 5",
          reviews: "12,483",
          in_stock: true,
          category: "Electronics",
          discount: "15% off",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["product", "price", "rating", "reviews", "in_stock"],
        },
      };

    case "Blockchain":
      return {
        previewType: "card",
        sampleResponse: {
          tx_hash: "0x3a4e...9f2b",
          block: "19,482,031",
          from: "0xAb5...3D1",
          to: "0xC8f...7E2",
          value: "1.284 ETH",
          gas_fee: "0.0024 ETH",
          status: "Confirmed",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["tx_hash", "block", "value", "gas_fee", "status"],
        },
      };

    case "Dictionaries":
      return {
        previewType: "card",
        sampleResponse: {
          word: "ephemeral",
          pronunciation: "/…™Ààf…õm.…ôr.…ôl/",
          part_of_speech: "adjective",
          definition: "Lasting for a very short time; transitory.",
          example: "Fame is ephemeral ‚Äî enjoy it while it lasts.",
          synonyms: "fleeting, transient, momentary",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["word", "pronunciation", "part_of_speech", "definition", "synonyms"],
        },
      };

    case "Art & Design":
      return {
        previewType: "card",
        sampleResponse: {
          palette: "Sunset Gradient",
          colors: ["#FF6B6B", "#FFE66D", "#FF8E53", "#C9184A"],
          mood: "Warm, Energetic",
          usage: "UI, Marketing, Branding",
          contrast_ratio: 4.5,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["palette", "mood", "usage", "contrast_ratio"],
        },
      };

    case "Calendar":
      return {
        previewType: "card",
        sampleResponse: {
          country: "United States",
          upcoming_holiday: "Memorial Day",
          date: "May 26, 2025",
          type: "Federal Holiday",
          days_away: 90,
          observed: true,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["country", "upcoming_holiday", "date", "type", "days_away"],
        },
      };

    case "URL Shorteners":
      return {
        previewType: "card",
        sampleResponse: {
          original_url: "https://github.com/akuligowski9/api-explorer/releases/v1.0.0",
          short_url: "https://bit.ly/4xKp9Qm",
          clicks: 1842,
          created: "Feb 20, 2026",
          expires: "Never",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["short_url", "original_url", "clicks", "created"],
        },
      };

    case "Data Validation":
      return {
        previewType: "card",
        sampleResponse: {
          input: "+1 (415) 555-0192",
          type: "Phone Number",
          valid: true,
          country: "United States",
          carrier: "AT&T",
          line_type: "Mobile",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["input", "type", "valid", "country", "carrier"],
        },
      };

    case "Phone":
      return {
        previewType: "card",
        sampleResponse: {
          number: "+44 20 7946 0958",
          country: "United Kingdom",
          region: "London",
          carrier: "BT Group",
          line_type: "Landline",
          valid: true,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["number", "country", "region", "carrier", "line_type"],
        },
      };

    case "Cloud Storage & File Sharing":
      return {
        previewType: "card",
        sampleResponse: {
          filename: "project-final-v3.zip",
          size: "48.2 MB",
          uploaded: "Feb 24, 2026",
          downloads: 127,
          expires: "March 24, 2026",
          shared_with: 4,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["filename", "size", "uploaded", "downloads", "expires"],
        },
      };

    case "Authentication & Authorization":
      return {
        previewType: "card",
        sampleResponse: {
          user_id: "usr_8Kp2xNq4mT",
          email: "user@example.com",
          role: "admin",
          token_expires: "3600s",
          mfa_enabled: true,
          last_login: "2026-02-25T09:41:22Z",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["user_id", "email", "role", "mfa_enabled", "last_login"],
        },
      };

    case "Programming":
      return {
        previewType: "card",
        sampleResponse: {
          language: "Python",
          version: "3.12.2",
          paradigm: "Multi-paradigm",
          typing: "Dynamic, Strong",
          first_appeared: 1991,
          designed_by: "Guido van Rossum",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["language", "version", "paradigm", "typing", "first_appeared"],
        },
      };

    case "Vehicle":
      return {
        previewType: "card",
        sampleResponse: {
          vin: "1HGBH41JXMN109186",
          make: "Honda",
          model: "Civic",
          year: 2022,
          engine: "1.5L Turbo 4-cyl",
          fuel_type: "Gasoline",
          transmission: "CVT",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["vin", "make", "model", "year", "engine", "fuel_type"],
        },
      };

    case "Tracking":
      return {
        previewType: "card",
        sampleResponse: {
          tracking_number: "1Z999AA10123456784",
          carrier: "UPS",
          status: "Out for Delivery",
          estimated_delivery: "Today by 8:00 PM",
          origin: "Memphis, TN",
          destination: "Brooklyn, NY",
          last_update: "9:04 AM ‚Äî Arrived at facility",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["tracking_number", "carrier", "status", "estimated_delivery", "destination"],
        },
      };

    case "Business":
      return {
        previewType: "card",
        sampleResponse: {
          company: "Acme Corp",
          industry: "Software",
          founded: 2012,
          employees: "501‚Äì1,000",
          revenue: "$48M ARR",
          headquarters: "Austin, TX",
          public: false,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["company", "industry", "founded", "employees", "revenue"],
        },
      };

    case "Continuous Integration":
      return {
        previewType: "card",
        sampleResponse: {
          pipeline: "main-build",
          status: "passed",
          duration: "4m 12s",
          triggered_by: "push to main",
          branch: "main",
          commit: "a3f91bc",
          tests_passed: "247 / 247",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["pipeline", "status", "duration", "branch", "tests_passed"],
        },
      };

    case "Open Source Projects":
      return {
        previewType: "card",
        sampleResponse: {
          name: "VS Code",
          license: "MIT",
          stars: "162,000",
          contributors: "1,900+",
          language: "TypeScript",
          latest_release: "1.87.0",
          activity: "Very Active",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["name", "license", "stars", "contributors", "latest_release"],
        },
      };

    case "Patent":
      return {
        previewType: "card",
        sampleResponse: {
          patent_number: "US10,123,456",
          title: "Method for Neural Network Optimization",
          assignee: "Acme Technologies",
          filed: "March 14, 2021",
          granted: "October 3, 2023",
          status: "Active",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["patent_number", "title", "assignee", "filed", "status"],
        },
      };

    case "Events":
      return {
        previewType: "card",
        sampleResponse: {
          event: "PyCon US 2026",
          date: "May 14‚Äì22, 2026",
          location: "Pittsburgh, PA",
          tickets: "From $125",
          attendees: "3,000+",
          category: "Technology Conference",
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["event", "date", "location", "tickets", "attendees"],
        },
      };

    case "Podcasts":
      return {
        previewType: "list",
        sampleResponse: {
          items: [
            { title: "How AI is Reshaping Work", show: "Lex Fridman Podcast" },
            { title: "The Future of Open Source", show: "Software Unscripted" },
            { title: "Building in Public", show: "Indie Hackers" },
            { title: "Deep Dive: TypeScript 5.4", show: "Syntax.fm" },
          ],
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          itemKey: "title",
          secondaryKey: "show",
        },
      };

    default:
      return {
        previewType: "card",
        sampleResponse: {
          endpoint: `GET /v1/${slugify(name)}`,
          response_time: "142ms",
          status: "200 OK",
          records_returned: 25,
          rate_limit: "1,000 req/day",
          auth_required: true,
        },
        previewConfig: {
          title: name,
          subtitle: desc,
          displayFields: ["endpoint", "response_time", "status", "records_returned", "rate_limit"],
        },
      };
  }
}

// ‚îÄ‚îÄ Main ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

let updated = 0;
let skipped = 0;

for (const entry of catalog.entries) {
  const slug = slugify(entry.API);
  const filePath = path.join(previewDir, `${slug}.json`);

  if (!fs.existsSync(filePath)) continue;

  const existing = JSON.parse(fs.readFileSync(filePath, "utf-8"));

  if (!isAutoGenerated(existing)) {
    skipped++;
    continue;
  }

  const { previewType, sampleResponse, previewConfig } = sampleForCategory(
    entry.Category,
    entry.API,
    entry.Description
  );

  const newPreview = {
    id: slug,
    previewType,
    sampleResponse,
    previewConfig,
  };

  fs.writeFileSync(filePath, JSON.stringify(newPreview, null, 2) + "\n");
  updated++;
}

console.log(`Updated: ${updated} auto-generated previews`);
console.log(`Skipped: ${skipped} hand-crafted previews (untouched)`);
